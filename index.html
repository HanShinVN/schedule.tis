<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIS| ƒêƒÉng K√Ω ƒêi C√¥ng T√°c</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="loadingOverlay" class="d-none">
        <div class="spinner-border text-light" role="status" style="width: 3rem; height: 3rem;"></div>
        <div class="mt-3 fw-bold text-white fs-5">ƒêang x·ª≠ l√Ω...</div>
    </div>

    <div id="successOverlay" class="d-none">
        <div class="success-card text-center fade-in">
            <div class="mb-3">
                <i class="bi bi-check-circle-fill text-success" style="font-size: 4rem;"></i>
            </div>
            <h4 class="fw-bold text-success mb-2">ƒêƒÉng k√Ω th√†nh c√¥ng!</h4>
            <p class="fs-5 text-muted mb-4">Ch√∫c b·∫°n th∆∞·ª£ng l·ªô b√¨nh an üöó‚úàÔ∏è</p>
            <div class="alert alert-light border border-secondary border-opacity-25 d-inline-block px-4 py-2 mb-4">
                T·ª± ƒë·ªông chuy·ªÉn trang sau <strong class="text-danger" id="countdown">3</strong> gi√¢y
            </div>
            <br>
            <button onclick="location.href='calendar.html'" class="btn btn-primary px-4 py-2 rounded-pill fw-bold shadow-sm">
                <i class="bi bi-calendar-check me-2"></i> Xem l·ªãch ngay
            </button>
        </div>
    </div>

    <div class="container py-4">
        <div class="row justify-content-center">
            <div class="col-lg-6 col-md-8">
                
                <div class="text-center mb-4 fade-in">
                    <img src="logo.png" alt="TIS Logo" class="img-fluid mb-3" style="max-height: 80px;">
                    <h5 class="text-uppercase fw-bold text-secondary mb-3">C·ªïng ƒêƒÉng K√Ω L·ªãch C√¥ng T√°c</h5>
                    <a href="calendar.html" class="btn btn-outline-primary btn-sm rounded-pill px-3">
                        <i class="bi bi-list-ul me-1"></i> Xem L·ªãch Tr√¨nh
                    </a>
                </div>

                <div class="card shadow-lg border-0 fade-in">
                    <div class="card-header bg-white border-0 pt-4 px-4 pb-0">
                        <div class="alert alert-light border-start border-4 border-danger shadow-sm mb-0">
                            <small class="text-muted">
                                <i class="bi bi-info-circle-fill text-danger"></i> 
                                ƒêi·ªÅn ƒë·∫ßy ƒë·ªß c√°c ƒëi·ªÉm ƒë·∫øn ƒë·ªÉ h·ªá th·ªëng t√≠nh t·ªïng qu√£ng ƒë∆∞·ªùng.
                            </small>
                        </div>
                    </div>

                    <div class="card-body p-4">
                        <form id="tripForm">
                            
                            <div class="row g-3 mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">H·ªç v√† t√™n <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="fullName" placeholder="Nguy·ªÖn VƒÉn A" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ph√≤ng ban <span class="text-danger">*</span></label>
                                    <select class="form-select" id="department" required>
                                        <option value="" disabled selected>Ch·ªçn ph√≤ng ban...</option>
                                        <option value="Ban Gi√°m ƒê·ªëc">Ban Gi√°m ƒê·ªëc</option>
                                        <option value="H√†ng H·∫£i">H√†ng H·∫£i</option>
                                        <option value="Phi H√†ng H·∫£i">Phi H√†ng H·∫£i</option>
                                        <option value="B·∫£o Hi·ªÉm S·ª©c Kh·ªèe">B·∫£o Hi·ªÉm S·ª©c Kh·ªèe</option>
                                        <option value="Ph√°t Tri·ªÉn Kinh Doanh">Ph√°t Tri·ªÉn Kinh Doanh</option>
                                        <option value="H·ªó Tr·ª£ Kinh Doanh">H·ªó Tr·ª£ Kinh Doanh</option>
                                        <option value="K·∫ø To√°n T·ªïng H·ª£p">K·∫ø To√°n T·ªïng H·ª£p</option>
                                        <option value="B·ªìi Th∆∞·ªùng">B·ªìi Th∆∞·ªùng</option>
                                        <option value="IT">IT</option>
                                    </select>
                                </div>
                            </div>

                            <div class="row g-3 mb-3">
                                <div class="col-md-12">
                                    <label class="form-label">Ph∆∞∆°ng ti·ªán <span class="text-danger">*</span></label>
                                    <select class="form-select" id="transport" required>
                                        <option value="" disabled selected>Ch·ªçn ph∆∞∆°ng ti·ªán...</option>
                                        <option value="√î t√¥">√î t√¥</option>
                                        <option value="M√°y bay">M√°y bay</option>
                                        <option value="Kh√°c">Kh√°c (Taxi, Grab...)</option>
                                    </select>
                                </div>
                            </div>

                            <div class="mb-3 d-none" id="carOwnerGroup">
                                <label class="form-label">Xe c·ªßa ai? <span class="text-danger">*</span></label>
                                <select class="form-select" id="carOwnerSelect">
                                    <option value="" disabled selected>Ch·ªçn xe...</option>
                                    <option value="Xe anh Phong">Xe anh Phong</option>
                                    <option value="Xe anh Minh">Xe anh Minh</option>
                                    <option value="Xe anh T√†i">Xe anh T√†i</option>
                                    <option value="Kh√°c">Kh√°c (Nh·∫≠p tay...)</option>
                                </select>
                                <input type="text" class="form-control mt-2 d-none" id="carOwnerInput" placeholder="Nh·∫≠p t√™n xe c·ª• th·ªÉ...">
                            </div>

                            <hr class="text-muted opacity-25">

                            <div class="row g-3 mb-3">
                                <div class="col-6 col-md-4">
                                    <label class="form-label">Ng√†y ƒëi <span class="text-danger">*</span></label>
                                    <input type="date" class="form-control" id="startDate" required>
                                </div>
                                <div class="col-6 col-md-4">
                                    <label class="form-label">Gi·ªù ƒëi <span class="text-danger">*</span></label>
                                    <input type="time" class="form-control" id="startTime" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">S·ªë ng√†y</label>
                                    <div class="input-group">
                                        <button class="btn btn-outline-secondary" type="button" onclick="adjustDays(-0.5)">-</button>
                                        <input type="number" class="form-control text-center" id="days" value="1" min="0.5" step="0.5" required>
                                        <button class="btn btn-outline-secondary" type="button" onclick="adjustDays(0.5)">+</button>
                                    </div>
                                </div>
                            </div>

                            <div id="scheduleAlert" class="alert d-none mb-3 py-2 text-center small fw-bold"></div>

                            <div class="mb-3 p-3 bg-white border rounded shadow-sm">
                                <label class="form-label fw-bold text-danger"><i class="bi bi-map-fill"></i> L·ªô tr√¨nh c√¥ng t√°c</label>
                                
                                <div id="destinationsContainer">
                                    <div class="input-group mb-2 destination-item" id="dest-1">
                                        <span class="input-group-text bg-light fw-bold text-secondary">1</span>
                                        <input type="text" class="form-control dest-input" placeholder="ƒêi·ªÉm ƒë·∫øn ƒë·∫ßu ti√™n..." required>
                                    </div>
                                </div>

                                <div class="d-flex justify-content-between mt-3">
                                    <button type="button" class="btn btn-outline-primary btn-sm rounded-pill fw-bold" onclick="addDestination()">
                                        <i class="bi bi-plus-circle-fill"></i> Th√™m ƒëi·ªÉm ƒë·∫øn
                                    </button>
                                    <button type="button" id="btnMeasure" class="btn btn-dark btn-sm rounded-pill fw-bold">
                                        <i class="bi bi-lightning-charge-fill"></i> T√≠nh T·ªïng KM
                                    </button>
                                </div>
                                <div class="form-text text-end mt-1 fst-italic">Nh·∫≠p l·∫ßn l∆∞·ª£t c√°c ƒëi·ªÉm theo th·ª© t·ª± di chuy·ªÉn.</div>
                            </div>

                            <div class="row g-3 mb-3 p-3 bg-light rounded-3 mx-0 border">
                                <div class="col-6">
                                    <label class="small text-muted text-uppercase fw-bold">T·ªïng qu√£ng ƒë∆∞·ªùng</br>(D·ª± Ki·∫øn)</label>
                                    <div class="fs-5 fw-bold text-danger" id="kmDisplay">0 km</div>
                                    <input type="hidden" id="km">
                                </div>
                                <div class="col-6 border-start">
                                    <label class="small text-muted text-uppercase fw-bold">T·ªïng th·ªùi gian</br>(D·ª± Ki·∫øn)</label>
                                    <div class="fs-5 fw-bold text-success" id="durationDisplay">0 ph√∫t</div>
                                    <input type="hidden" id="duration">
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="form-label">ƒêi c√¥ng t√°c v·ªõi ai (n·∫øu c√≥)</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-white"><i class="bi bi-people-fill"></i></span>
                                    <input type="text" class="form-control" id="companions" placeholder="Nh·∫≠p t√™n ng∆∞·ªùi ƒëi c√πng...">
                                </div>
                            </div>

                            <button class="btn btn-primary w-100 py-3 fw-bold text-uppercase shadow-sm" id="btnSubmit">
                                <i class="bi bi-send-check-fill me-2"></i> G·ª≠i ƒêƒÉng K√Ω
                            </button>
                        </form>
                    </div>
                </div>
                
                <div class="text-center mt-4 text-muted small">
                    &copy; 2026 TIS Insurance Broker. Internal System.
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // H√†m ch·ªânh s·ªë ng√†y nhanh
        function adjustDays(delta) {
            const input = document.getElementById('days');
            let val = parseFloat(input.value) || 0;
            val += delta;
            if(val < 0.5) val = 0.5;
            input.value = val;
            input.dispatchEvent(new Event('change'));
        }
    </script>
</body>
</html>